# LIMS-JS 实验室信息管理系统增强脚本

这是一个用于增强LIMS系统功能的油猴脚本集合，主要针对10.1.228.22系统进行功能扩展和优化。

## 功能特性

### 1. 登录页面增强 (login_page_query_button.user.js)
- 隐藏不必要的二维码区域
- 优化页面布局和样式
- 添加用户快速选择功能
- 自动计算验证码

### 2. 任务查询页增强 (questquery.js)
- 增加规格型号列
- 增加成型日期列
- 增加龄期列
- 增加实验日期列
- 删除冗余的信息沟通列
- 为所有列添加排序功能
- 自动加载任务详细信息

### 3. 综合查询增强 (show_comprehensive.js)
- 显示综合查询选项并设为默认
- 增加委托ID列
- 优化表格显示

### 4. 报告扫描链接添加 (report_scan.user.js)
- 自动检测PDF和JPG格式的扫描文件
- 在报告链接旁添加扫描件快速访问链接
- 支持PDF和JPG格式的在线预览
- 美化链接样式

### 5. 报告批量下载功能 (lims-batch-download.js)
- 支持批量下载报告文件
- 支持下载原始委托信息
- 自动处理各种文件格式
- 保存下载记录
- 显示下载进度
- 支持断点续传

## 安装说明

1. 首先安装油猴插件(Tampermonkey)：
   - Chrome: [Chrome网上应用店](https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo)
   - Firefox: [Firefox附加组件](https://addons.mozilla.org/en-US/firefox/addon/tampermonkey/)

2. 安装所需脚本：
   - 点击油猴插件图标
   - 选择"添加新脚本"
   - 将对应脚本代码复制粘贴进去
   - 点击保存

## 使用说明

### 登录页面
- 打开系统登录页面后自动优化界面
- 从下拉列表选择用户可快速填写账号密码
- 验证码会自动计算并填写

### 任务查询页
- 打开任务查询页面后自动优化表格
- 可以使用新增的列进行排序和筛选
- 自动加载详细信息

### 综合查询页
- 自动选择"综合查询"选项
- 可以查看委托ID
- 支持批量下载报告

### 报告查看页
- 自动检查并显示扫描件链接
- 点击链接可直接查看PDF或JPG格式的扫描文件

### 批量下载
- 在综合查询页面选择需要下载的报告
- 点击"批量下载"按钮开始下载
- 可以在下载记录中查看所有文件的下载地址

## 注意事项

1. 请确保浏览器允许弹出窗口和下载多个文件
2. 批量下载时请合理选择下载数量，避免服务器压力过大
3. 部分功能需要内网环境才能正常使用
4. 如遇到问题请检查网络连接和系统权限

## 技术支持

如有问题或建议，请提交Issue或联系系统管理员。

## 更新日志

### v2.2
- 优化批量下载功能
- 修复URL处理问题
- 改进错误处理

### v0.4
- 增加任务查询新功能
- 优化表格性能
- 修复已知问题

### v0.1
- 初始版本发布
- 基础功能实现 